"use strict";(self.webpackChunknobook_labextension=self.webpackChunknobook_labextension||[]).push([[509],{509(e,o,t){t.r(o),t.d(o,{default:()=>k});var n=t(654),a=t(884),l=t(341),c=t(249);const d="nobook:create-new",i="nobook:open-as-notebook",s=new c.LabIcon({name:"nobook:icon",svgstr:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">\n    <rect x="3" y="2" width="18" height="20" rx="2" fill="none" stroke="currentColor" stroke-width="1.5"/>\n    <text x="12" y="15" text-anchor="middle" font-size="8" font-family="monospace" fill="currentColor">.py</text>\n  </svg>'});function r(e,o){if(!o.has(e))return e;const t=`${e}-copy`;if(!o.has(t))return t;let n=1;for(;o.has(`${t}-${n}`);)n++;return`${t}-${n}`}function b(e){const o=e.content;!function(e){const o=new Set;e.widgets.forEach((e,t)=>{if("code"!==e.model.type)return;let n=e.model.getMetadata("nobook"),a=null==n?void 0:n.block;if(a){if(o.has(a)){const t=r(a,o);e.model.setMetadata("nobook",{...n,block:t}),a=t}}else a=r(`cell-${t}`,o),e.model.setMetadata("nobook",{...n,block:a});o.add(a)})}(o),o.widgets.forEach(e=>{var o;const t=e.model.getMetadata("nobook"),n=null!==(o=null==t?void 0:t.block)&&void 0!==o?o:"";let a=e.node.querySelector(".nobook-block-label");if(n){if(!a){a=document.createElement("div"),a.className="nobook-block-label";const o=document.createElement("input");o.className="nobook-block-input",o.type="text",o.spellcheck=!1,a.appendChild(o);const t=e,n=()=>{const e=t.model.getMetadata("nobook"),n=o.value.trim();n&&n!==(null==e?void 0:e.block)&&t.model.setMetadata("nobook",{...e,block:n})};o.addEventListener("blur",n),o.addEventListener("keydown",e=>{"Enter"===e.key&&(e.preventDefault(),o.blur()),e.stopPropagation()}),e.node.insertBefore(a,e.node.firstChild)}const o=a.querySelector("input");o&&document.activeElement!==o&&(o.value=n)}else a&&a.remove()})}const k=[{id:"nobook-labextension:launcher",autoStart:!0,requires:[a.IDefaultFileBrowser],optional:[n.ILauncher],activate:(e,o,t)=>{const{commands:n}=e;n.addCommand(d,{label:"Nobook",caption:"Create a new .py notebook",icon:s,execute:async()=>{const e=o.model.path,t=await n.execute("docmanager:new-untitled",{path:e,type:"notebook"});void 0!==t&&await n.execute("docmanager:open",{path:t.path,factory:"Notebook",kernel:{name:"python3"}})}}),n.addCommand(i,{label:"Open as Nobook",caption:"Open .py file in notebook editor",icon:s,isVisible:()=>{const e=o.selectedItems().next();return!e.done&&e.value.path.endsWith(".py")},execute:()=>{const e=o.selectedItems().next();e.done||n.execute("docmanager:open",{path:e.value.path,factory:"Notebook",kernel:{name:"python3"}})}}),e.contextMenu.addItem({command:i,selector:".jp-DirListing-item",rank:3}),t&&t.add({command:d,category:"Notebook",rank:1}),console.log("nobook-labextension:launcher activated")}},{id:"nobook-labextension:cell-labels",autoStart:!0,requires:[l.INotebookTracker],activate:(e,o)=>{o.widgetAdded.connect((e,o)=>{o.context.ready.then(()=>{!function(e){const o=e.content;o.model&&o.model.cells.changed.connect(()=>{requestAnimationFrame(()=>b(e))}),o.activeCellChanged.connect(()=>b(e))}(o),b(o)})}),console.log("nobook-labextension:cell-labels activated")}}]}}]);